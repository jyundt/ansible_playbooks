---
- name: Upgrade all packages
  apt:
    upgrade: dist
    update_cache: yes

- name: Remove ufw
  apt:
    name: ufw
    state: absent
    purge: yes

- name: "Set locale"
  locale_gen:
    name: "{{locale}}"
    state: present

# Don't tell me how to live my life, Ubuntu...
- name: "Remove Ubuntu release upgrader"
  apt:
    name: ubuntu-release-upgrader-core
    state: absent
    purge: yes

# Why is Bionic the worst?
- name: "Remove Ubuntu Advantage bloatware"
  apt:
    name: ubuntu-advantage-tools
    state: absent
    purge: yes
  when: ansible_distribution_release == "bionic"

- name: "Disable motd-news timer"
  systemd:
    name: motd-news.timer
    state: stopped
    enabled: no
  when: ansible_distribution_release == "bionic"

- name: "Disable motd-news in /etc/default"
  lineinfile:
    dest: /etc/default/motd-news
    line: "ENABLED=0"
    state: present
    regexp: "^ENABLED="
  when: ansible_distribution_release == "bionic"
